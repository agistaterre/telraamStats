<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Learn how to get traffic data from a Telraam camera.">
<title>Gathering data • telraamStats</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Gathering data">
<meta property="og:description" content="Learn how to get traffic data from a Telraam camera.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">telraamStats</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data-details.html">Gathering data</a>
    <a class="dropdown-item" href="../articles/data-visualization.html">Visualize and analyse traffic</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/KetsiaGuichard/telraamStats/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Gathering data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/KetsiaGuichard/telraamStats/blob/HEAD/vignettes/data-details.Rmd" class="external-link"><code>vignettes/data-details.Rmd</code></a></small>
      <div class="d-none name"><code>data-details.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette describes traffic data from Telraam sensors and how to
get access to specific data.</p>
<p>Before we go on, we’ll attach the packages we use.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://annuaire.agistaterre.org/telraamStats/" class="external-link">telraamStats</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="telraam">Telraam<a class="anchor" aria-label="anchor" href="#telraam"></a>
</h3>
<p><a href="https://telraam.net/en/what-is-telraam" class="external-link">Telraam</a> is a
Belgian company that develops sensors for monitoring and collecting
multi-modal traffic data. These sensors are equipped with cameras to
count road users using various mode of transport, including pedestrian,
cyclists, cars and heavy vehicles.</p>
<p>A diverse range of stakeholders (individuals, community groups, local
authoritieds, researchers…) can purchase and install a Telraam sensor on
their buildings. A map of all sensors is available on <a href="https://telraam.net/" class="external-link">Telraam website</a>. Everyone can access the
data through the web interface (<a href="https://telraam.net/en/location/9000001844" class="external-link">example</a>) or the <a href="https://telraam-api.net/" class="external-link">API</a>.</p>
<div class="section level4">
<h4 id="available-data">Available data<a class="anchor" aria-label="anchor" href="#available-data"></a>
</h4>
<p>The Telraam API provides information on road segments and sensors
locations, or parameters, but most importantly, it offers traffic data.
Every hour, each sensor sends information on traffic counts, for each
transportation mode and road direction, along with a confidence metric.
In addition to traffic counts, estimated car speed and a car speed
histogram are also available. Further details on the data will be
provided in this vignette.</p>
</div>
</div>
<div class="section level3">
<h3 id="included-dataset">Included dataset<a class="anchor" aria-label="anchor" href="#included-dataset"></a>
</h3>
<p>If you’re only interested on discovering Telraam data and playing
with real traffic data, a dataset of two road segments in the city of
Châteaubourg (FR) is included in the package.</p>
<p>Châteaubourg is a municipality in Brittany, northwestern France. Its
population is around 7,500 inhabitants and its area is less than
30km<span class="math inline">\(^2\)</span>. In France, it is the city
with the largest number of Telraam sensors in 2023 and by far the
highest density of sensors.</p>
<p>The two road segments offer hourly data from January 1, 2022, to
December 31, 2022. The data is directly extracted from the API and may
contain missing or extreme values.</p>
<div class="section level4">
<h4 id="load-included-dataset">Load included dataset<a class="anchor" aria-label="anchor" href="#load-included-dataset"></a>
</h4>
<p>Included dataset is lazily loaded with the telraamStats package. If
you have already called <code><a href="https://annuaire.agistaterre.org/telraamStats/" class="external-link">library(telraamStats)</a></code>, the dataset
is already attached and you can call it directly :</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">traffic</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="2%">
<col width="6%">
<col width="2%">
<col width="5%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="0%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="3%">
<col width="3%">
<col width="2%">
<col width="6%">
<col width="18%">
<col width="3%">
<col width="0%">
<col width="2%">
<col width="1%">
<col width="2%">
<col width="1%">
<col width="4%">
<col width="3%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="right">instance_id</th>
<th align="left">segment_fullname</th>
<th align="right">segment_id</th>
<th align="left">date</th>
<th align="left">interval</th>
<th align="right">uptime</th>
<th align="right">heavy</th>
<th align="right">car</th>
<th align="right">bike</th>
<th align="right">pedestrian</th>
<th align="right">heavy_lft</th>
<th align="right">heavy_rgt</th>
<th align="right">car_lft</th>
<th align="right">car_rgt</th>
<th align="right">bike_lft</th>
<th align="right">bike_rgt</th>
<th align="right">pedestrian_lft</th>
<th align="right">pedestrian_rgt</th>
<th align="right">direction</th>
<th align="left">car_speed_hist_0to70plus</th>
<th align="left">car_speed_hist_0to120plus</th>
<th align="left">timezone</th>
<th align="right">v85</th>
<th align="left">day</th>
<th align="right">hour</th>
<th align="left">weekday</th>
<th align="left">holiday</th>
<th align="left">vacation</th>
<th align="left">segment_name</th>
<th align="left">uptime_quality</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">-1</td>
<td align="left">9000001844 - RteVitre-06</td>
<td align="right">9000001844</td>
<td align="left">2022-01-01 01:00:00 CET</td>
<td align="left">hourly</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0</td>
<td align="left">Europe/Paris</td>
<td align="right">NA</td>
<td align="left">2022-01-01</td>
<td align="right">1</td>
<td align="left">saturday</td>
<td align="left">TRUE</td>
<td align="left">Vacances de Noël</td>
<td align="left">RteVitre-06</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">-1</td>
<td align="left">9000001844 - RteVitre-06</td>
<td align="right">9000001844</td>
<td align="left">2022-01-01 02:00:00 CET</td>
<td align="left">hourly</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0</td>
<td align="left">Europe/Paris</td>
<td align="right">NA</td>
<td align="left">2022-01-01</td>
<td align="right">2</td>
<td align="left">saturday</td>
<td align="left">TRUE</td>
<td align="left">Vacances de Noël</td>
<td align="left">RteVitre-06</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">-1</td>
<td align="left">9000001844 - RteVitre-06</td>
<td align="right">9000001844</td>
<td align="left">2022-01-01 03:00:00 CET</td>
<td align="left">hourly</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0</td>
<td align="left">Europe/Paris</td>
<td align="right">NA</td>
<td align="left">2022-01-01</td>
<td align="right">3</td>
<td align="left">saturday</td>
<td align="left">TRUE</td>
<td align="left">Vacances de Noël</td>
<td align="left">RteVitre-06</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">-1</td>
<td align="left">9000001844 - RteVitre-06</td>
<td align="right">9000001844</td>
<td align="left">2022-01-01 04:00:00 CET</td>
<td align="left">hourly</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0</td>
<td align="left">Europe/Paris</td>
<td align="right">NA</td>
<td align="left">2022-01-01</td>
<td align="right">4</td>
<td align="left">saturday</td>
<td align="left">TRUE</td>
<td align="left">Vacances de Noël</td>
<td align="left">RteVitre-06</td>
<td align="left">FALSE</td>
</tr>
<tr class="odd">
<td align="right">-1</td>
<td align="left">9000001844 - RteVitre-06</td>
<td align="right">9000001844</td>
<td align="left">2022-01-01 05:00:00 CET</td>
<td align="left">hourly</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0</td>
<td align="left">Europe/Paris</td>
<td align="right">NA</td>
<td align="left">2022-01-01</td>
<td align="right">5</td>
<td align="left">saturday</td>
<td align="left">TRUE</td>
<td align="left">Vacances de Noël</td>
<td align="left">RteVitre-06</td>
<td align="left">FALSE</td>
</tr>
<tr class="even">
<td align="right">-1</td>
<td align="left">9000001844 - RteVitre-06</td>
<td align="right">9000001844</td>
<td align="left">2022-01-01 06:00:00 CET</td>
<td align="left">hourly</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0</td>
<td align="left">0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0, 0, 0, 0, 0</td>
<td align="left">Europe/Paris</td>
<td align="right">NA</td>
<td align="left">2022-01-01</td>
<td align="right">6</td>
<td align="left">saturday</td>
<td align="left">TRUE</td>
<td align="left">Vacances de Noël</td>
<td align="left">RteVitre-06</td>
<td align="left">FALSE</td>
</tr>
</tbody>
</table>
<p>Otherwise, if you don’t want to load the entire package, you can also
access this dataset by using <code><a href="../reference/traffic.html">telraamStats::traffic</a></code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="retrieve-data-from-a-specific-road-segment-or-set-of-segments">Retrieve data from a specific road segment or set of segments<a class="anchor" aria-label="anchor" href="#retrieve-data-from-a-specific-road-segment-or-set-of-segments"></a>
</h3>
<div class="section level4">
<h4 id="obtain-a-telraam-token">1. Obtain a Telraam token<a class="anchor" aria-label="anchor" href="#obtain-a-telraam-token"></a>
</h4>
<p>To work with data from one sensor - or more -, you must first create
a <a href="https://telraam.net/en/register" class="external-link">Telraam (free) account</a>
to obtain an API token. The API token serves as a unique identifier for
accessing the Telraam API service, which is used in this package. You
can generate it in your personal dashboard on the Telraam website. For
more information about the Telraam API, refer to the <a href="https://talks.telraam.net/t/telraam-api-even-more-data-statistics/79" class="external-link">Telraam
Q&amp;A website</a>.</p>
</div>
<div class="section level4">
<h4 id="specify-your-token-in-configuration">2. Specify your token in configuration<a class="anchor" aria-label="anchor" href="#specify-your-token-in-configuration"></a>
</h4>
<p>It is strongly recommended not to directly embed your token in the
code, especially if the code is shared or versioned using a system like
Git.</p>
<p>You have two options to specify your own Telraam token :</p>
<ol style="list-style-type: decimal">
<li>Edit your <code>.Renviron</code> file. <code>.Renviron</code> is
useful for defining sensitive information or R environment variables: it
contains a list of environment variables to set. An easy way to edit
this file and add your Telraam token is by using the
<code>usethis</code> package. Run the following command (either once or
every time you change your API Token) : <code>.Renviron</code> file will
open in RStudio and you can add a new line in the form
<code>token='YourTelraamAPIToken'</code>.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://usethis.r-lib.org" class="external-link">"usethis"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"usethis"</span><span class="op">)</span> <span class="co">#if you haven't installed 'usethis' already</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu">edit_r_environ</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>If you are not comfortable with the previous step, you can use an
built-in function of the <code>telraamStats</code> package. However,
keep in mind that you will need to run this function every time you want
to retrieve your data:</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_telraam_token.html">set_telraam_token</a></span><span class="op">(</span>token <span class="op">=</span> <span class="st">'YourTelraamAPIToken'</span><span class="op">)</span></span></code></pre></div>
<p>If you want to verify that your token is correctly set, you can use
the following command :</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_telraam_token.html">get_telraam_token</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="specify-road-segment-ids-in-configuration-file">3. Specify road segment IDs in configuration file<a class="anchor" aria-label="anchor" href="#specify-road-segment-ids-in-configuration-file"></a>
</h4>
<p>Each road segment has a unique ID, which can be found in the Telraam
location URL. For instance, here is the URL for one of Châteaubourg’s
segments <a href="https://telraam.net/home/location/9000005665" class="external-link"><code>https://telraam.net/home/location/9000005665</code></a>,
and its ID is located in the last part of the URL
(<code>9000005665</code>). Once you have gathered the IDs for all your
segments, you can specify them by editing the
<code>inst\config.yml</code> file.</p>
<p>This file can be created using the <code><a href="../reference/create_config.html">create_config()</a></code>
function. Once executed, you find a <code>config.yml</code> file in the
<code>inst\</code> folder of your work directory.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_config.html">create_config</a></span><span class="op">(</span>create_directory <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The file already contains the following template, which you can
modify (directly in the yml file) to add your own segments, adhering to
the format of the template, that is, segment name (without quotes),
followed by a colon, then the segment number within quotes :
<code>segmentName: '9000000000'</code>.</p>
<pre><code>default:
  url: https://telraam-api.net/v1
  segments:
    segment-01: '9000000000'
    segment-02: '9000000000'</code></pre>
<p>You can specify as many segments as you want and personalize the
segment’s names.</p>
<pre><code>default:
  url: https://telraam-api.net/v1
  segments:
    MyFirstSegment: '9000000000'
    My-second-segment: '9000000000'
    My_3rd_segment: '9000000000'</code></pre>
<p>If you don’t want to create a folder in your project directory,
another option is to use a temporary folder and specify your segments
names and IDs directly through the <code><a href="../reference/create_config.html">create_config()</a></code>
function, but you will have to re-run this command at each session.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_of_segments</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Burel"</span><span class="op">=</span> <span class="st">"9000002156"</span>, <span class="st">"Vitre"</span> <span class="op">=</span> <span class="st">"9000001844"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/create_config.html">create_config</a></span><span class="op">(</span>segments <span class="op">=</span> <span class="va">list_of_segments</span>, create_directory <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-data-for-your-road-segments">4. Get data for your road segments<a class="anchor" aria-label="anchor" href="#get-data-for-your-road-segments"></a>
</h4>
<p>Once you have specified the names and IDs of your road segments, you
can use the <code><a href="../reference/retrieve_sensor.html">retrieve_sensor()</a></code> function to gather data from
this segment from the Telraam API. This function takes, as arguments,
the name of the segment, the first and the last day of the period of
interest. You must use the same names as specified in the configuration
files and dates must be of the date type.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/retrieve_sensor.html">retrieve_sensor</a></span><span class="op">(</span>segment_name <span class="op">=</span> <span class="st">"segment-01"</span>, </span>
<span>                start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2023-09-01'</span><span class="op">)</span>, </span>
<span>                end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2023-09-30'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you want to store the data, you can directly use
<code><a href="../reference/write_update_data.html">write_update_data()</a></code>, which performs the same task but also
writes or updates the sensor data in a temporary folder or in the
<code>data/</code> directory in .Rdata format. The arguments are the
same as those of the previous function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/write_update_data.html">write_update_data</a></span><span class="op">(</span>segment_name <span class="op">=</span> <span class="st">"segment-01"</span>,</span>
<span>                  start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2023-09-01'</span><span class="op">)</span>,</span>
<span>                  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">'2023-09-30'</span><span class="op">)</span>,</span>
<span>                  create_directory <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co">#TRUE if you want to save the data in a permanent folder</span></span></code></pre></div>
<p>To retrieve data you have already stored, you can use
<code><a href="../reference/import_sensor.html">import_sensor()</a></code>. This function imports data associated with
a given list of sensor names from .RData files contained in the
<code>data/</code> directory. Here, you should also use the same names
as specified in the configuration files. All available periods will be
imported.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/import_sensor.html">import_sensor</a></span><span class="op">(</span>list_sensor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"segment-01"</span>,<span class="st">"segment-02"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="data-details">Data details<a class="anchor" aria-label="anchor" href="#data-details"></a>
</h3>
<p>By importing data from your own road segments (following the previous
steps) or using the included dataset, you should obtain Telraam data
with the same columns. Among these columns, the most important ones
are:</p>
<ul>
<li>
<em>segment_id</em> : Telraam ID of the road segment ;</li>
<li>
<em>date</em> : date and UTC time of the reporting interval
(beginning of the interval) ;</li>
<li>
<em>interval</em> : can be “hourly” or “daily” for hourly or daily
aggregate data ;</li>
<li>
<em>uptime</em> : between 0 and 1, represents the portion of the
reporting interval that was actively spent counting the traffic. For
more information about the uptime parameter, you can refer to <a href="https://telraam.net/en/blog/precision-accuracy-and-validations-of-the-original-telraam-sensor" class="external-link">this
Telraam article</a> ;</li>
<li>
<em>heavy, heavy_lft, heavy_rgt</em> : number of heavy vehicles,
total and in both directions. You have also the same columns for each
transportation mode (<em>car, bike, pedestrian</em>) ;</li>
<li>
<em>car_speed_hist_0to70plus, car_speed_hist_0to120plus</em> : the
estimated car speed distribution in 10 km/h bins from 0 to 70+ km/h or
120+ km/h (in percentage) ;</li>
<li>
<em>v85</em> : estimated car speed limit in km/h that 85% of all
cars respect.</li>
</ul>
<p>Complete data description can be found in the data documentation of
this package, or you can refer to the <a href="https://telraam-api.net/" class="external-link">Telraam API website</a> for further
details.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lilou Augeray, Ulysse Caromel, Ketsia Guichard, Pascal Irz, Mijin Park, Tanguy Richard, Agis-ta-terre.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
